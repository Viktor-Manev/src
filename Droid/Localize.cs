using System; using Xamarin.Forms; using System.Threading; using System.Globalization;  [assembly:Dependency(typeof(PTSPensjon.Android.Localize))] namespace PTSPensjon.Android {     public class Localize : PTSPensjon.ILocalize     { 		public Localize() { }          public void SetLocale(CultureInfo ci)         {             Thread.CurrentThread.CurrentCulture = ci;             Thread.CurrentThread.CurrentUICulture = ci;         }         public CultureInfo GetCurrentCultureInfo()         {             var netLanguage = "en";             var androidLocale = Java.Util.Locale.Default;             netLanguage = AndroidToDotnetLanguage(androidLocale.ToString().Replace("_", "-"));              // this gets called a lot - try/catch can be expensive so consider caching or something             System.Globalization.CultureInfo ci = null;             try             {                 ci = new System.Globalization.CultureInfo(netLanguage);             }             catch (CultureNotFoundException e1)             {                 // iOS locale not valid .NET culture (eg. "en-ES" : English in Spain)                 // fallback to first characters, in this case "en"                 try                 {                     var fallback = ToDotnetFallbackLanguage(new PlatformCulture(netLanguage));                     ci = new System.Globalization.CultureInfo(fallback);                 }                 catch (CultureNotFoundException e2)                 {                     // iOS language not valid .NET culture, falling back to English                     ci = new System.Globalization.CultureInfo("en");                 }             }             return ci;         }         string AndroidToDotnetLanguage(string androidLanguage)         {             var netLanguage = androidLanguage;             //certain languages need to be converted to CultureInfo equivalent             switch (androidLanguage)             { 				case "nn-NO":
					netLanguage = "nb-NO";                     break;                 case "nb-NO":                     netLanguage = "nb-NO";                     break;                 case "se-NO":                     netLanguage = "nb-NO";                     break;             }             return netLanguage;         }         string ToDotnetFallbackLanguage(PlatformCulture platCulture)         {             var netLanguage = platCulture.LanguageCode;             return netLanguage;         }     } }