using System; using System.Linq; using PTSPensjon.Droid; using Xamarin.Auth; using Xamarin.Forms;  [assembly: Dependency(typeof(Storage))] namespace PTSPensjon.Droid { 	public class Storage : IStorage 	{ 		public Storage() { }  		public void SetString(string key, string value) 		{ 			var m_account = AccountStore.Create().FindAccountsForService(App.AppName).FirstOrDefault(); 			if (m_account == null) 			{ 				m_account = new Account 				{ 					Username = "Default" 				}; 			}  			if (!m_account.Properties.ContainsKey(key)) 			{ 				m_account.Properties.Add(key, value); 			} 			m_account.Properties[key] = value;  			try
			{ 				AccountStore.Create().Save(m_account, App.AppName); 			}
			catch (Exception e)
			{ 				Console.WriteLine("Can't save account. Error was: " + e.ToString()); 			} 		}  		public string GetString(string key) 		{
			var m_account = AccountStore.Create().FindAccountsForService(App.AppName).FirstOrDefault();
			return (m_account != null && m_account.Properties.ContainsKey(key)) ? m_account.Properties[key] : string.Empty;
		}  		public void DeleteCredentials() 		{ 			var account = AccountStore.Create().FindAccountsForService(App.AppName).FirstOrDefault(); 			if (account != null) 			{ 				AccountStore.Create().Delete(account, App.AppName); 				DeleteCredentials(); 			} 		}  		public bool DoCredentialsExist() 		{ 			return AccountStore.Create().FindAccountsForService(App.AppName).Any() ? true : false; 		} 	} } 